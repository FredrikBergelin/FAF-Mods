
-- we do not have any manual assignments
UnitIconAssignments = {
	{BlueprintId = "UEL0001", IconSet = "icon_commander_uef"},
	{BlueprintId = "URL0001", IconSet = "icon_commander_cybran"},
	{BlueprintId = "XSL0001", IconSet = "icon_commander_seraphim"},
	{BlueprintId = "UAL0001", IconSet = "icon_commander_aeon"},

	{BlueprintId = "URL0301_RAS", IconSet = "icon_subcommander_ras"},
    {BlueprintId = "UEL0301_RAS", IconSet = "icon_subcommander_ras"},
    {BlueprintId = "UAL0301_RAS", IconSet = "icon_subcommander_ras"},

    {BlueprintId = "UEL0301_Combat", IconSet = "icon_subcommander_combat"},
    {BlueprintId = "URL0301_Combat", IconSet = "icon_subcommander_combat"},
    {BlueprintId = "UAL0301_Combat", IconSet = "icon_subcommander_combat"},
    {BlueprintId = "XSL0301_Combat", IconSet = "icon_subcommander_combat"},

	{BlueprintId = "UAL0301_NanoCombat", IconSet = "icon_subcommander_combat"},
    {BlueprintId = "XSL0301_AdvancedCombat", IconSet = "icon_subcommander_combat"},

	{BlueprintId = "UEL0301_Engineer", IconSet = "icon_subcommander_engineer"},
    {BlueprintId = "UAL0301_Engineer", IconSet = "icon_subcommander_engineer"},
    {BlueprintId = "URL0301_Engineer", IconSet = "icon_subcommander_engineer"},
    {BlueprintId = "XSL0301_Engineer", IconSet = "icon_subcommander_engineer"},

	{BlueprintId = "UEL0301_Rambo", IconSet = "icon_subcommander_rambo"},
    {BlueprintId = "UAL0301_Rambo", IconSet = "icon_subcommander_rambo"},
    {BlueprintId = "URL0301_Rambo", IconSet = "icon_subcommander_rambo"},
    {BlueprintId = "XSL0301_Rambo", IconSet = "icon_subcommander_rambo"},

	{BlueprintId = "URL0301_Stealth", IconSet = "icon_subcommander_stealth"},
	{BlueprintId = "URL0301_Cloak", IconSet = "icon_subcommander_cloak"},
	{BlueprintId = "URL0301_AntiAir", IconSet = "icon_subcommander_antiair"},

    {BlueprintId = "UEL0301_BubbleShield", IconSet = "icon_subcommander_shield"},
    {BlueprintId = "UEL0301_IntelJammer", IconSet = "icon_subcommander_jammer"},

    {BlueprintId = "UAL0301_NanoCombat", IconSet = "icon_subcommander_nanocombat"},
    {BlueprintId = "UAL0301_ShieldCombat", IconSet = "icon_subcommander_shieldcombat"},

    {BlueprintId = "XSL0301_NanoCombat", IconSet = "icon_subcommander_nanocombat"},
    {BlueprintId = "XSL0301_AdvancedCombat", IconSet = "icon_subcommander_advancedcombat"},
    {BlueprintId = "XSL0301_Missile", IconSet = "icon_subcommander_missile"},

	{BlueprintId = "XEA3204", IconSet = "icon_drone_engineer"},
	{BlueprintId = "XEL0209", IconSet = "icon_land2_sparky"},

	{BlueprintId = "UEB1102", IconSet = "icon_structure1_hydro"},
	{BlueprintId = "URB1102", IconSet = "icon_structure1_hydro"},
	{BlueprintId = "UAB1102", IconSet = "icon_structure1_hydro"},
	{BlueprintId = "XSB1102", IconSet = "icon_structure1_hydro"},
	{BlueprintId = "XNB1102", IconSet = "icon_structure1_hydro"},

	{BlueprintId = "XNB3102", IconSet = "icon_structure1_sonar"},
	{BlueprintId = "URB3102", IconSet = "icon_structure1_sonar"},
	{BlueprintId = "UEB3102", IconSet = "icon_structure1_sonar"},
	{BlueprintId = "UAB3102", IconSet = "icon_structure1_sonar"},
	{BlueprintId = "XSB3102", IconSet = "icon_structure1_sonar"},

	{BlueprintId = "UEB3202", IconSet = "icon_structure2_sonar"},
	{BlueprintId = "URB3202", IconSet = "icon_structure2_sonar"},
	{BlueprintId = "UAB3202", IconSet = "icon_structure2_sonar"},
	{BlueprintId = "XSB3202", IconSet = "icon_structure2_sonar"},
	{BlueprintId = "XNB3202", IconSet = "icon_structure2_sonar"},

	{BlueprintId = "UES0305", IconSet = "icon_structure3_sonar"},
	{BlueprintId = "URS0305", IconSet = "icon_structure3_sonar"},
	{BlueprintId = "UAS0305", IconSet = "icon_structure3_sonar"},
	{BlueprintId = "XNB3302", IconSet = "icon_structure3_sonar"},

	{BlueprintId = "XRB3301", IconSet = "icon_structure3_optics"},
	{BlueprintId = "XAB3301", IconSet = "icon_structure3_optics"},

	{BlueprintId = "UEB1104", IconSet = "icon_structure2_fab"},
	{BlueprintId = "URB1104", IconSet = "icon_structure2_fab"},
	{BlueprintId = "XSB1104", IconSet = "icon_structure2_fab"},
	{BlueprintId = "UAB1104", IconSet = "icon_structure2_fab"},
	{BlueprintId = "XNB1104", IconSet = "icon_structure2_fab"},
	{BlueprintId = "UEB1303", IconSet = "icon_structure3_fab"},
	{BlueprintId = "URB1303", IconSet = "icon_structure3_fab"},
	{BlueprintId = "UAB1303", IconSet = "icon_structure3_fab"},
	{BlueprintId = "XSB1303", IconSet = "icon_structure3_fab"},
	{BlueprintId = "XNB1303", IconSet = "icon_structure3_fab"},

	{BlueprintId = "UES0401", IconSet = "icon_experimental_atlantis"},
	{BlueprintId = "XSA0402", IconSet = "icon_experimental_awasher"},
	{BlueprintId = "UAA0310", IconSet = "icon_experimental_czar"},
	{BlueprintId = "UEL0401", IconSet = "icon_experimental_fatty"},	
	{BlueprintId = "UEB2401", IconSet = "icon_experimental_mavor"},
	{BlueprintId = "XRL0403", IconSet = "icon_experimental_mega"},
	{BlueprintId = "XAB1401", IconSet = "icon_experimental_paragon"},
	{BlueprintId = "XAB2307", IconSet = "icon_experimental_salvation"},
	{BlueprintId = "XEB2402", IconSet = "icon_experimental_satelit"},
	{BlueprintId = "URL0401", IconSet = "icon_experimental_scathis"},
	{BlueprintId = "URA0401", IconSet = "icon_experimental_soulripper"},
	{BlueprintId = "URL0402", IconSet = "icon_experimental_spider"},
	{BlueprintId = "UAS0401", IconSet = "icon_experimental_tempest"},
	{BlueprintId = "XSB2401", IconSet = "icon_experimental_yolona"},
	{BlueprintId = "XSL0401", IconSet = "icon_experimental_yota"},
	{BlueprintId = "XSL0402", IconSet = "icon_experimental_storm"},
	{BlueprintId = "UAL0401", IconSet = "icon_experimental_gc"},
	{BlueprintId = "XEA0002", IconSet = "icon_experimental_satellite"},


	{BlueprintId = "URL0101", IconSet = "icon_land1_intel_unarmed"},
	{BlueprintId = "UAL0101", IconSet = "icon_land1_intel_hover"},
	{BlueprintId = "UAL0201", IconSet = "icon_land1_directfire_hover"},
	{BlueprintId = "XSL0103", IconSet = "icon_land1_artillery_hover"},

	{BlueprintId = "UEL0204", IconSet = "icon_land2_mongoose"},
	{BlueprintId = "DRL0204", IconSet = "icon_land2_hoplite"},

	{BlueprintId = "URL0203", IconSet = "icon_land2_directfire_antinavy_seabed"},
	{BlueprintId = "UEL0203", IconSet = "icon_land2_directfire_hover"},
	{BlueprintId = "XAL0203", IconSet = "icon_land2_directfire_hover"},
	{BlueprintId = "XSL0203", IconSet = "icon_land2_directfire_hover"},
	{BlueprintId = "UAL0205", IconSet = "icon_land2_antiair_hover"},
	{BlueprintId = "XSL0205", IconSet = "icon_land2_antiair_hover"},
	{BlueprintId = "UAL0307", IconSet = "icon_land2_shield_hover"},

	{BlueprintId = "XSL0307", IconSet = "icon_land3_shield_hover"},
	{BlueprintId = "DAL0310", IconSet = "icon_land3_antishield_hover"},

	{BlueprintId = "UEL0303", IconSet = "icon_land3_directfire_titan"},
	{BlueprintId = "URL0303", IconSet = "icon_land3_directfire_loyalist"},
	{BlueprintId = "UAL0303", IconSet = "icon_land3_directfire_harbinger"},
	{BlueprintId = "XSL0303", IconSet = "icon_land3_directfire_othuum"},
	{BlueprintId = "UAL0304", IconSet = "icon_land3_artillery_serenity"},

	{BlueprintId = "UAS0103", IconSet = "icon_ship1_intel_aeon"},

	{BlueprintId = "XES0102", IconSet = "icon_ship2_antinavy_torpedoboat"},
	{BlueprintId = "URS0201", IconSet = "icon_ship2_antinavy_cybran"},
	{BlueprintId = "UAS0201", IconSet = "icon_ship2_antinavy_aeon"},

	{BlueprintId = "URS0202", IconSet = "icon_ship2_antiair_cybran"},
	{BlueprintId = "UAS0202", IconSet = "icon_ship2_antiair_aeon"},
	{BlueprintId = "UES0202", IconSet = "icon_ship2_antiair_uef"},
	{BlueprintId = "XSS0202", IconSet = "icon_ship2_antiair_sera"},

	{BlueprintId = "XRS0204", IconSet = "icon_sub2_antinavy_cybran"},
	{BlueprintId = "XAS0204", IconSet = "icon_sub2_antinavy_aeon"},

	-- {BlueprintId = "XSS0304", IconSet = "icon_sub3_antinavy_sera"},

	{BlueprintId = "UES0302", IconSet = "icon_ship3_directfire_uef"},
	{BlueprintId = "UAS0302", IconSet = "icon_ship3_directfire_aeon"},
	{BlueprintId = "XSS0302", IconSet = "icon_ship3_directfire_sera"},

}

--- Entry point for scripted assignments. This function has a limited scope and any changes to the 
-- units and / or the projectiles do not affect the game as they are deep-copied of the originals. 
-- Functionality that is available:
--  - moho-log interaction: LOG, WARN, _ALERT, SPEW, error, assert
--  - debugging: repr
--  - iterators: pairs, ipairs, next 
--  - typical statements: table, math (excluding math.random), string, tonumber, type, unpack, tostring
-- @param units All available unit blueprints.
-- @param projectiles All available projectile blueprints.
-- @param icons All the file names of the icons part of this mod.
function ScriptedIconAssignments (units, projectiles, icons)

    -- for performance
    local StringSub = string.sub
    local StringFind = string.find

    -- this is where we store the results
    local IconAssignments = {}

    -- loop over all the units
    for id, bp in units do

        -- retrieve the original strategic icon name
        local strategicIconName = bp.StrategicIconName

        -- this can be nil
        if strategicIconName then

            -- compute this once for all icons
            local target = "/" .. strategicIconName .. "_rest.dds"

            -- check if we have the same identifier in our icon folder
            local partOfIconsMod = false
            for k, icon in icons do
                if StringSub(icon, -9) == '_rest.dds' and StringFind(icon, target) then
                    partOfIconsMod = true
                    break
                end
            end

            -- if we do, use that instead
            if partOfIconsMod then
                IconAssignments[id] = { BlueprintId = id, IconSet = bp.StrategicIconName }
            end
        end
    end

    return IconAssignments
end